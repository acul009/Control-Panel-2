// Code generated by goa v3.8.5, DO NOT EDIT.
//
// deployments HTTP server types
//
// Command:
// $ goa gen github.com/acul009/control-panel-2/src/api/deployments/design

package server

import (
	"unicode/utf8"

	deployments "github.com/acul009/control-panel-2/src/api/deployments/gen/deployments"
	goa "goa.design/goa/v3/pkg"
)

// UpsertRequestBody is the type of the "deployments" service "upsert" endpoint
// HTTP request body.
type UpsertRequestBody struct {
	Name       *string                 `form:"name,omitempty" json:"name,omitempty" xml:"name,omitempty"`
	Containers []*ContainerRequestBody `form:"containers,omitempty" json:"containers,omitempty" xml:"containers,omitempty"`
	Parameters []*ParameterRequestBody `form:"parameters,omitempty" json:"parameters,omitempty" xml:"parameters,omitempty"`
}

// GetResponseBody is the type of the "deployments" service "get" endpoint HTTP
// response body.
type GetResponseBody struct {
	Name       string                   `form:"name" json:"name" xml:"name"`
	Containers []*ContainerResponseBody `form:"containers" json:"containers" xml:"containers"`
	Parameters []*ParameterResponseBody `form:"parameters,omitempty" json:"parameters,omitempty" xml:"parameters,omitempty"`
}

// GetDeploymentNotFoundResponseBody is the type of the "deployments" service
// "get" endpoint HTTP response body for the "DeploymentNotFound" error.
type GetDeploymentNotFoundResponseBody struct {
	// Name is the name of this class of errors.
	Name string `form:"name" json:"name" xml:"name"`
	// ID is a unique identifier for this particular occurrence of the problem.
	ID string `form:"id" json:"id" xml:"id"`
	// Message is a human-readable explanation specific to this occurrence of the
	// problem.
	Message string `form:"message" json:"message" xml:"message"`
	// Is the error temporary?
	Temporary bool `form:"temporary" json:"temporary" xml:"temporary"`
	// Is the error a timeout?
	Timeout bool `form:"timeout" json:"timeout" xml:"timeout"`
	// Is the error a server-side fault?
	Fault bool `form:"fault" json:"fault" xml:"fault"`
}

// DeleteDeploymentNotFoundResponseBody is the type of the "deployments"
// service "delete" endpoint HTTP response body for the "DeploymentNotFound"
// error.
type DeleteDeploymentNotFoundResponseBody struct {
	// Name is the name of this class of errors.
	Name string `form:"name" json:"name" xml:"name"`
	// ID is a unique identifier for this particular occurrence of the problem.
	ID string `form:"id" json:"id" xml:"id"`
	// Message is a human-readable explanation specific to this occurrence of the
	// problem.
	Message string `form:"message" json:"message" xml:"message"`
	// Is the error temporary?
	Temporary bool `form:"temporary" json:"temporary" xml:"temporary"`
	// Is the error a timeout?
	Timeout bool `form:"timeout" json:"timeout" xml:"timeout"`
	// Is the error a server-side fault?
	Fault bool `form:"fault" json:"fault" xml:"fault"`
}

// ContainerResponseBody is used to define fields on response body types.
type ContainerResponseBody struct {
	Name       string                        `form:"name" json:"name" xml:"name"`
	Image      string                        `form:"image" json:"image" xml:"image"`
	Parameters []*ParameterUsageResponseBody `form:"parameters,omitempty" json:"parameters,omitempty" xml:"parameters,omitempty"`
	Services   []string                      `form:"services,omitempty" json:"services,omitempty" xml:"services,omitempty"`
	Ports      []*PortmappingResponseBody    `form:"ports,omitempty" json:"ports,omitempty" xml:"ports,omitempty"`
}

// ParameterUsageResponseBody is used to define fields on response body types.
type ParameterUsageResponseBody struct {
	Name        *string  `form:"name,omitempty" json:"name,omitempty" xml:"name,omitempty"`
	Environment []string `form:"environment,omitempty" json:"environment,omitempty" xml:"environment,omitempty"`
	Files       []string `form:"files,omitempty" json:"files,omitempty" xml:"files,omitempty"`
}

// PortmappingResponseBody is used to define fields on response body types.
type PortmappingResponseBody struct {
	Host      uint32 `form:"host" json:"host" xml:"host"`
	Container uint32 `form:"container" json:"container" xml:"container"`
	Protocol  string `form:"protocol" json:"protocol" xml:"protocol"`
}

// ParameterResponseBody is used to define fields on response body types.
type ParameterResponseBody struct {
	Name  string `form:"name" json:"name" xml:"name"`
	Value string `form:"value" json:"value" xml:"value"`
}

// ContainerRequestBody is used to define fields on request body types.
type ContainerRequestBody struct {
	Name       *string                      `form:"name,omitempty" json:"name,omitempty" xml:"name,omitempty"`
	Image      *string                      `form:"image,omitempty" json:"image,omitempty" xml:"image,omitempty"`
	Parameters []*ParameterUsageRequestBody `form:"parameters,omitempty" json:"parameters,omitempty" xml:"parameters,omitempty"`
	Services   []string                     `form:"services,omitempty" json:"services,omitempty" xml:"services,omitempty"`
	Ports      []*PortmappingRequestBody    `form:"ports,omitempty" json:"ports,omitempty" xml:"ports,omitempty"`
}

// ParameterUsageRequestBody is used to define fields on request body types.
type ParameterUsageRequestBody struct {
	Name        *string  `form:"name,omitempty" json:"name,omitempty" xml:"name,omitempty"`
	Environment []string `form:"environment,omitempty" json:"environment,omitempty" xml:"environment,omitempty"`
	Files       []string `form:"files,omitempty" json:"files,omitempty" xml:"files,omitempty"`
}

// PortmappingRequestBody is used to define fields on request body types.
type PortmappingRequestBody struct {
	Host      *uint32 `form:"host,omitempty" json:"host,omitempty" xml:"host,omitempty"`
	Container *uint32 `form:"container,omitempty" json:"container,omitempty" xml:"container,omitempty"`
	Protocol  *string `form:"protocol,omitempty" json:"protocol,omitempty" xml:"protocol,omitempty"`
}

// ParameterRequestBody is used to define fields on request body types.
type ParameterRequestBody struct {
	Name  *string `form:"name,omitempty" json:"name,omitempty" xml:"name,omitempty"`
	Value *string `form:"value,omitempty" json:"value,omitempty" xml:"value,omitempty"`
}

// NewGetResponseBody builds the HTTP response body from the result of the
// "get" endpoint of the "deployments" service.
func NewGetResponseBody(res *deployments.Deployment) *GetResponseBody {
	body := &GetResponseBody{
		Name: res.Name,
	}
	if res.Containers != nil {
		body.Containers = make([]*ContainerResponseBody, len(res.Containers))
		for i, val := range res.Containers {
			body.Containers[i] = marshalDeploymentsContainerToContainerResponseBody(val)
		}
	}
	if res.Parameters != nil {
		body.Parameters = make([]*ParameterResponseBody, len(res.Parameters))
		for i, val := range res.Parameters {
			body.Parameters[i] = marshalDeploymentsParameterToParameterResponseBody(val)
		}
	}
	return body
}

// NewGetDeploymentNotFoundResponseBody builds the HTTP response body from the
// result of the "get" endpoint of the "deployments" service.
func NewGetDeploymentNotFoundResponseBody(res *goa.ServiceError) *GetDeploymentNotFoundResponseBody {
	body := &GetDeploymentNotFoundResponseBody{
		Name:      res.Name,
		ID:        res.ID,
		Message:   res.Message,
		Temporary: res.Temporary,
		Timeout:   res.Timeout,
		Fault:     res.Fault,
	}
	return body
}

// NewDeleteDeploymentNotFoundResponseBody builds the HTTP response body from
// the result of the "delete" endpoint of the "deployments" service.
func NewDeleteDeploymentNotFoundResponseBody(res *goa.ServiceError) *DeleteDeploymentNotFoundResponseBody {
	body := &DeleteDeploymentNotFoundResponseBody{
		Name:      res.Name,
		ID:        res.ID,
		Message:   res.Message,
		Temporary: res.Temporary,
		Timeout:   res.Timeout,
		Fault:     res.Fault,
	}
	return body
}

// NewUpsertDeployment builds a deployments service upsert endpoint payload.
func NewUpsertDeployment(body *UpsertRequestBody) *deployments.Deployment {
	v := &deployments.Deployment{
		Name: *body.Name,
	}
	v.Containers = make([]*deployments.Container, len(body.Containers))
	for i, val := range body.Containers {
		v.Containers[i] = unmarshalContainerRequestBodyToDeploymentsContainer(val)
	}
	if body.Parameters != nil {
		v.Parameters = make([]*deployments.Parameter, len(body.Parameters))
		for i, val := range body.Parameters {
			v.Parameters[i] = unmarshalParameterRequestBodyToDeploymentsParameter(val)
		}
	}

	return v
}

// ValidateUpsertRequestBody runs the validations defined on UpsertRequestBody
func ValidateUpsertRequestBody(body *UpsertRequestBody) (err error) {
	if body.Name == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("name", "body"))
	}
	if body.Containers == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("containers", "body"))
	}
	if len(body.Containers) < 1 {
		err = goa.MergeErrors(err, goa.InvalidLengthError("body.containers", body.Containers, len(body.Containers), 1, true))
	}
	for _, e := range body.Containers {
		if e != nil {
			if err2 := ValidateContainerRequestBody(e); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
	}
	for _, e := range body.Parameters {
		if e != nil {
			if err2 := ValidateParameterRequestBody(e); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
	}
	return
}

// ValidateContainerRequestBody runs the validations defined on
// ContainerRequestBody
func ValidateContainerRequestBody(body *ContainerRequestBody) (err error) {
	if body.Name == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("name", "body"))
	}
	if body.Image == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("image", "body"))
	}
	for _, e := range body.Parameters {
		if e != nil {
			if err2 := ValidateParameterUsageRequestBody(e); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
	}
	for _, e := range body.Ports {
		if e != nil {
			if err2 := ValidatePortmappingRequestBody(e); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
	}
	return
}

// ValidateParameterUsageRequestBody runs the validations defined on
// ParameterUsageRequestBody
func ValidateParameterUsageRequestBody(body *ParameterUsageRequestBody) (err error) {
	if body.Name != nil {
		if utf8.RuneCountInString(*body.Name) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("body.name", *body.Name, utf8.RuneCountInString(*body.Name), 1, true))
		}
	}
	return
}

// ValidatePortmappingRequestBody runs the validations defined on
// PortmappingRequestBody
func ValidatePortmappingRequestBody(body *PortmappingRequestBody) (err error) {
	if body.Host == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("host", "body"))
	}
	if body.Container == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("container", "body"))
	}
	if body.Protocol == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("protocol", "body"))
	}
	if body.Host != nil {
		if *body.Host < 1 {
			err = goa.MergeErrors(err, goa.InvalidRangeError("body.host", *body.Host, 1, true))
		}
	}
	if body.Host != nil {
		if *body.Host > 65535 {
			err = goa.MergeErrors(err, goa.InvalidRangeError("body.host", *body.Host, 65535, false))
		}
	}
	if body.Container != nil {
		if *body.Container < 1 {
			err = goa.MergeErrors(err, goa.InvalidRangeError("body.container", *body.Container, 1, true))
		}
	}
	if body.Container != nil {
		if *body.Container > 65535 {
			err = goa.MergeErrors(err, goa.InvalidRangeError("body.container", *body.Container, 65535, false))
		}
	}
	if body.Protocol != nil {
		if !(*body.Protocol == "tcp" || *body.Protocol == "udp") {
			err = goa.MergeErrors(err, goa.InvalidEnumValueError("body.protocol", *body.Protocol, []interface{}{"tcp", "udp"}))
		}
	}
	return
}

// ValidateParameterRequestBody runs the validations defined on
// ParameterRequestBody
func ValidateParameterRequestBody(body *ParameterRequestBody) (err error) {
	if body.Name == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("name", "body"))
	}
	if body.Value == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("value", "body"))
	}
	if body.Name != nil {
		if utf8.RuneCountInString(*body.Name) < 1 {
			err = goa.MergeErrors(err, goa.InvalidLengthError("body.name", *body.Name, utf8.RuneCountInString(*body.Name), 1, true))
		}
	}
	return
}
